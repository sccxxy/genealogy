{"version":3,"sources":["webpack:///./src/views/geneal/view.vue?8f55","webpack:///src/views/geneal/view.vue","webpack:///./src/utils/assist.js","webpack:///./src/components/tree/Link.vue?7808","webpack:///./src/components/tree/Tree.vue?64c0","webpack:///src/components/tree/Link.vue","webpack:///./src/utils/dataHelper.js","webpack:///./src/components/tree/Node.vue?b44f","webpack:///./src/components/tree/Node.vue","webpack:///./src/components/tree/Node.vue?0587","webpack:///./src/components/tree/Link.vue?88b6","webpack:///./src/utils/propsValidate.js","webpack:///src/components/tree/Tree.vue","webpack:///./src/components/tree/ForeignObjectElement.js","webpack:///src/components/tree/Node.vue","webpack:///./src/components/tree/Tree.vue","webpack:///./src/components/tree/Link.vue","webpack:///./src/views/geneal/view.vue","webpack:///./src/components/tree/Tree.vue?f4dc","webpack:///./src/views/geneal/view.vue?4310"],"names":["name","data","translate","x","y","separation","components","Tree","methods","dimensions","this","$refs","treeContainer","$el","getBoundingClientRect","width","scope","console","log","linkData","start","end","setTreeCenter","oneOf","value","valueList","some","item","typeOf","obj","toString","Object","prototype","map","call","deepCopy","t","o","i","length","push","uniqueId","Math","random","substring","props","initStyle","opacity","computed","d","orientation","parent","nodeSize","path","sx","sy","startPoint","px","py","endPoint","factor","dx","parseInt","dy","dt","deepFactor","centerY","centerX","pathFunc","Error","transitionDuration","applyOpacity","assignProperties","node","id","uuid","v4","_collapsed","children","_children","component","render","_vm","_h","$createElement","_c","_self","ref","nodeData","staticClass","style","attrs","transform","_v","collapseIcon","on","handleClick","_e","staticRenderFns","linkPath","treeProps","initData","type","Array","required","String","default","validator","collapsible","Boolean","Number","nodeSvgShape","nodeSvgShapeAttr","r","siblings","nonSiblings","zoomable","zoom","scaleExtent","min","max","scale","allowForeignObjects","renderForeignObjects","Function","$$tree","Link","Node","svgRef","gRef","nodes","links","treemap","root","treeData","descendants","forEach","depth","slice","watch","val","svg","g","nodeSet","initialDepth","n","targetNode","findNodeById","child","collapseNode","nodeId","hits","concat","filter","bindZoomListener","viewPort","height","inject","created","$scopedSlots","$node","$options","propsData","h","ForeignObjectElement","setTransform","applyTransform","done","attr","e","$emit","class","_l","tree","link","index","key","handleNodeToggle","scopedSlots","_u","fn"],"mappings":"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AAKH,GACnBS,EAAKD,SAASJ,EAAKH,GACvB,GAAyB,aAArB7C,KAAKwC,YAA4B,CAC/BW,EAAK,KACPD,EAAS,GAEPC,GAAM,KACRD,GAAU,GAEZ,MAAMI,GAAMN,EAAKH,GAAM,EAAI7C,KAAKuD,WAChCZ,EACR,IACA,EACA,IACA,EACA,IACA,EACA,KACA,KACA,KACA,uBACA,KACA,KACA,KACA,uBACA,KACA,KACA,IACA,EACA,KACA,KACA,IACA,EACA,IACA,EAEM,GAAyB,eAArB3C,KAAKwC,YAA8B,CACjCa,EAAK,KACPH,EAAS,GAEPG,GAAM,KACRH,GAAU,GAEZ,MAAMI,GAAMP,EAAKH,GAAM,EAAI5C,KAAKuD,WAChCZ,EACR,IACA,EACA,IACA,EACA,KACA,KACA,IACA,EACA,KACA,KACA,KACA,uBACA,KACA,KACA,KACA,uBACA,KACA,KACA,IACA,EACA,IACA,EACA,IACA,EAEM,OAAOA,GAGT,WACE,IAAIA,EAAO,GACX,MAAMa,GAAWxD,KAAKiD,SAASvD,EAAIM,KAAK8C,WAAWpD,GAAK,EAClD+D,GAAWzD,KAAKiD,SAASxD,EAAIO,KAAK8C,WAAWrD,GAAK,EAuCxD,MAtCyB,aAArBO,KAAKwC,cACPG,EACR,IACA,gBACA,IACA,gBACA,IACA,gBACA,IACA,EACA,IACA,kBACA,IACA,EACA,IACA,kBACA,IACA,mBAE+B,eAArB3C,KAAKwC,cACPG,EACR,IACA,gBACA,IACA,gBACA,IACA,EACA,IACA,gBACA,IACA,EACA,IACA,kBACA,IACA,kBACA,IACA,mBAEaA,GAGT,WACE,MAAMA,EACZ,IACA,gBACA,IACA,gBACA,IACA,gBACA,KACA,qCACA,IACA,kBACA,KACA,qCACA,IACA,kBACA,IACA,kBACM,OAAOA,GAET,WACE,MAAN,YAAU,EAAV,yBACe3C,KAAKA,KAAK0D,UAEzB,cAAU,EAAV,yBACe1D,KAAK0D,SAAS1D,KAAKS,SAAUT,KAAK8C,WAAY9C,KAAKiD,eAE5D,IAAIU,MAAM,kCAGd7D,QAAS,CACP,aAAauC,EAAU,GACjBrC,KAAK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","file":"assets/js/chunk-e59145c6.90ad3a17.js","sourcesContent":["import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./view.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./view.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"tree-progress\">\n    <Tree\n      ref=\"treeContainer\"\n      orientation=\"vertical\"\n      :initData=\"data\"\n      :translate=\"translate\"\n      :separation=\"separation\"\n      pathFunc=\"straight\"\n    >\n      <template slot-scope=\"scope\">\n        <div class=\"base-node member\">\n          <div class=\"main\">\n            <div class=\"elderOrder\">\n              次子\n            </div>\n            <div class=\"lineage\">二十三世</div>\n          </div>\n          <div class=\"content\">\n            <div class=\"uname\">\n              <div class=\"username\">张三丰</div>\n              <div class=\"epithet\">张无忌</div>\n            </div>\n            <div class=\"wifeLastname\">韩氏</div>\n          </div>\n        </div>\n      </template>\n    </Tree>\n  </div>\n</template>\n\n<script>\nimport Tree from \"../../components/tree/Tree.vue\";\n// import Tree from \"../components/Tree\";\nimport \"../../style/tree.scss\";\nexport default {\n  name: \"horizontal\",\n  data() {\n    return {\n      data: [\n        {\n          name: \"Henry\",\n          attributes: {\n            title: \"研发部leader\",\n            photo:\n              \"http://img.hb.aicdn.com/0788a51b27ba8db84f61d95249725475d5396f20119ac-HVge7P_fw658\"\n          },\n          children: [\n            {\n              name: \"JACK\",\n              attributes: {\n                title: \"研发总监\",\n                photo:\n                  \"http://img.hb.aicdn.com/0788a51b27ba8db84f61d95249725475d5396f20119ac-HVge7P_fw658\"\n              },\n              children: [\n                {\n                  name: \"Jane\",\n                  attributes: {\n                    title: \"web开发\",\n                    photo:\n                      \"http://img.hb.aicdn.com/0e7c6aee0cc058724c8f40ce28794575d4b1e2a412ed8-E76e7h_fw658\"\n                  }\n                },\n                {\n                  name: \"Bill\",\n                  attributes: {\n                    title: \"ios开发\",\n                    photo:\n                      \"http://img.hb.aicdn.com/0788a51b27ba8db84f61d95249725475d5396f20119ac-HVge7P_fw658\"\n                  }\n                },\n                {\n                  name: \"John\",\n                  attributes: {\n                    title: \"android开发\",\n                    photo:\n                      \"http://img.hb.aicdn.com/0788a51b27ba8db84f61d95249725475d5396f20119ac-HVge7P_fw658\"\n                  }\n                }\n              ]\n            },\n            {\n              name: \"Amy\",\n              attributes: {\n                title: \"设计总监\",\n                photo:\n                  \"http://img.hb.aicdn.com/0e7c6aee0cc058724c8f40ce28794575d4b1e2a412ed8-E76e7h_fw658\"\n              },\n              children: [\n                {\n                  name: \"Sunny\",\n                  attributes: {\n                    title: \"UI设计师\",\n                    photo:\n                      \"http://img.hb.aicdn.com/0e7c6aee0cc058724c8f40ce28794575d4b1e2a412ed8-E76e7h_fw658\"\n                  }\n                },\n                {\n                  name: \"Emma\",\n                  attributes: {\n                    title: \"UI设计师\",\n                    photo:\n                      \"http://img.hb.aicdn.com/0e7c6aee0cc058724c8f40ce28794575d4b1e2a412ed8-E76e7h_fw658\"\n                  }\n                }\n              ]\n            },\n            {\n              name: \"Julie\",\n              attributes: {\n                title: \"产品总监\",\n                photo:\n                  \"http://img.hb.aicdn.com/0e7c6aee0cc058724c8f40ce28794575d4b1e2a412ed8-E76e7h_fw658\"\n              },\n              children: [\n                {\n                  name: \"Michael\",\n                  attributes: {\n                    title: \"产品经理\",\n                    photo:\n                      \"http://img.hb.aicdn.com/0788a51b27ba8db84f61d95249725475d5396f20119ac-HVge7P_fw658\"\n                  }\n                }\n              ]\n            }\n          ]\n        }\n      ],\n      translate: {\n        x: 0,\n        y: 0\n      },\n      separation: { siblings: 1.2, nonSiblings: 1.2 }\n    };\n  },\n  components: {\n    Tree\n  },\n  // components: {\n  //   Tree\n  // },\n  methods: {\n    setTreeCenter() {\n      const dimensions = this.$refs.treeContainer.$el.getBoundingClientRect();\n      this.translate = {\n        x: dimensions.width / 2,\n        y: 100\n      };\n    },\n    handleClick(scope) {\n      console.log(scope);\n    },\n    pathFunc(linkData, start, end) {\n      return \"M\" + end.x + \",\" + end.y + \" \" + start.x + \",\" + start.y;\n    }\n  },\n  mounted() {\n    this.setTreeCenter();\n  }\n};\n</script>\n","/**\r\n * @description 判断参数是否是其中之一\r\n * @param {*} value\r\n * @param {*} valueList\r\n */\r\nexport const oneOf = (value, valueList) => {\r\n    return valueList.some(item => item === value)\r\n}\r\n/**\r\n * @description 判断数据类型\r\n * @param {*} obj \r\n */\r\nexport const typeOf = (obj) => {\r\n    const toString = Object.prototype.toString;\r\n    const map = {\r\n        '[object Boolean]': 'boolean',\r\n        '[object Number]': 'number',\r\n        '[object String]': 'string',\r\n        '[object Function]': 'function',\r\n        '[object Array]': 'array',\r\n        '[object Date]': 'date',\r\n        '[object RegExp]': 'regExp',\r\n        '[object Undefined]': 'undefined',\r\n        '[object Null]': 'null',\r\n        '[object Object]': 'object'\r\n    };\r\n    return map[toString.call(obj)];\r\n}\r\n/**\r\n * @description 深度克隆\r\n * @param {*} data \r\n */\r\nexport const deepCopy = (data) => {\r\n    const t = typeOf(data);\r\n    let o;\r\n\r\n    if (t === 'array') {\r\n        o = [];\r\n    } else if (t === 'object') {\r\n        o = {};\r\n    } else {\r\n        return data;\r\n    }\r\n\r\n    if (t === 'array') {\r\n        for (let i = 0; i < data.length; i++) {\r\n            o.push(deepCopy(data[i]));\r\n        }\r\n    } else if (t === 'object') {\r\n        for (let i in data) {\r\n            o[i] = deepCopy(data[i]);\r\n        }\r\n    }\r\n    return o;\r\n}\r\n\r\n/**\r\n * @description 随机生成字符串\r\n */\r\nexport const uniqueId = () => {\r\n    return Math.random().toString(36).substring(7)\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Link.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Link.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=script&lang=js&\"","<template>\r\n  <path\r\n    class=\"v-tree__link-base\"\r\n    :d=\"linkPath\"\r\n    :style=\"initStyle\"\r\n    :ref=\"`link-${linkData.data.id}`\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { select } from \"d3\";\r\nimport { typeOf } from \"../../utils/assist\";\r\nexport default {\r\n  name: \"Link\",\r\n  props: [\r\n    \"pathFunc\",\r\n    \"orientation\",\r\n    \"nodeSize\",\r\n    \"linkData\",\r\n    \"transitionDuration\",\r\n    \"deepFactor\"\r\n  ],\r\n  data() {\r\n    return {\r\n      initStyle: {\r\n        opacity: 0\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    startPoint() {\r\n      const d = this.linkData;\r\n      let start = {};\r\n      if (this.orientation === \"horizontal\") {\r\n        start = {\r\n          x: d.parent.y + this.nodeSize.x / 2,\r\n          y: d.parent.x\r\n        };\r\n      } else {\r\n        start = {\r\n          x: d.parent.x,\r\n          y: d.parent.y + this.nodeSize.y / 2\r\n        };\r\n      }\r\n      return start;\r\n    },\r\n    endPoint() {\r\n      const d = this.linkData;\r\n      let end = {};\r\n      if (this.orientation === \"horizontal\") {\r\n        end = {\r\n          x: d.y - this.nodeSize.x / 2,\r\n          y: d.x\r\n        };\r\n      } else {\r\n        end = {\r\n          x: d.x,\r\n          y: d.y - this.nodeSize.y / 2\r\n        };\r\n      }\r\n      return end;\r\n    },\r\n    // fish\r\n    fish() {\r\n      let path = \"\";\r\n      const [sx, sy] = [this.startPoint.x, this.startPoint.y];\r\n      const [px, py] = [this.endPoint.x, this.endPoint.y];\r\n      let factor = 0;\r\n      let dx = parseInt(px - sx);\r\n      let dy = parseInt(py - sy);\r\n      if (this.orientation === \"vertical\") {\r\n        if (dx > 10) {\r\n          factor = 1;\r\n        }\r\n        if (dx < -10) {\r\n          factor = -1;\r\n        }\r\n        const dt = (py - sy) / 2 / this.deepFactor;\r\n        path =\r\n          \"M\" +\r\n          sx +\r\n          \",\" +\r\n          sy +\r\n          \"Q\" +\r\n          sx +\r\n          \",\" +\r\n          (sy + dt) +\r\n          \" \" +\r\n          (sx + (dt * factor) / this.deepFactor) +\r\n          \",\" +\r\n          (sy + dt) +\r\n          \"L\" +\r\n          (px - (dt * factor) / this.deepFactor) +\r\n          \",\" +\r\n          (sy + dt) +\r\n          \"Q\" +\r\n          px +\r\n          \",\" +\r\n          (sy + dt) +\r\n          \" \" +\r\n          px +\r\n          \",\" +\r\n          py;\r\n      }\r\n      if (this.orientation === \"horizontal\") {\r\n        if (dy > 10) {\r\n          factor = 1;\r\n        }\r\n        if (dy < -10) {\r\n          factor = -1;\r\n        }\r\n        const dt = (px - sx) / 2 / this.deepFactor;\r\n        path =\r\n          \"M\" +\r\n          sx +\r\n          \",\" +\r\n          sy +\r\n          \"Q\" +\r\n          (px - dt) +\r\n          \",\" +\r\n          sy +\r\n          \" \" +\r\n          (px - dt) +\r\n          \",\" +\r\n          (sy + (dt * factor) / this.deepFactor) +\r\n          \"L\" +\r\n          (px - dt) +\r\n          \",\" +\r\n          (py - (dt * factor) / this.deepFactor) +\r\n          \"Q\" +\r\n          (px - dt) +\r\n          \",\" +\r\n          py +\r\n          \" \" +\r\n          px +\r\n          \",\" +\r\n          py;\r\n      }\r\n      return path;\r\n    },\r\n    // straight\r\n    straight() {\r\n      let path = \"\";\r\n      const centerY = (this.endPoint.y + this.startPoint.y) / 2;\r\n      const centerX = (this.endPoint.x + this.startPoint.x) / 2;\r\n      if (this.orientation === \"vertical\") {\r\n        path =\r\n          \"M\" +\r\n          this.endPoint.x +\r\n          \",\" +\r\n          this.endPoint.y +\r\n          \" \" +\r\n          this.endPoint.x +\r\n          \",\" +\r\n          centerY +\r\n          \" \" +\r\n          this.startPoint.x +\r\n          \",\" +\r\n          centerY +\r\n          \" \" +\r\n          this.startPoint.x +\r\n          \",\" +\r\n          this.startPoint.y;\r\n      }\r\n      if (this.orientation === \"horizontal\") {\r\n        path =\r\n          \"M\" +\r\n          this.endPoint.x +\r\n          \",\" +\r\n          this.endPoint.y +\r\n          \" \" +\r\n          centerX +\r\n          \",\" +\r\n          this.endPoint.y +\r\n          \" \" +\r\n          centerX +\r\n          \",\" +\r\n          this.startPoint.y +\r\n          \" \" +\r\n          this.startPoint.x +\r\n          \",\" +\r\n          this.startPoint.y;\r\n      }\r\n      return path;\r\n    },\r\n    // diagonal\r\n    diagonal() {\r\n      const path =\r\n        \"M\" +\r\n        this.endPoint.x +\r\n        \",\" +\r\n        this.endPoint.y +\r\n        \"C\" +\r\n        this.endPoint.x +\r\n        \",\" +\r\n        (this.endPoint.y + this.startPoint.y) / 2 +\r\n        \" \" +\r\n        this.startPoint.x +\r\n        \",\" +\r\n        (this.endPoint.y + this.startPoint.y) / 2 +\r\n        \" \" +\r\n        this.startPoint.x +\r\n        \",\" +\r\n        this.startPoint.y;\r\n      return path;\r\n    },\r\n    linkPath() {\r\n      if (typeOf(this.pathFunc) === \"string\") {\r\n        return this[this.pathFunc];\r\n      }\r\n      if (typeOf(this.pathFunc) === \"function\") {\r\n        return this.pathFunc(this.linkData, this.startPoint, this.endPoint);\r\n      }\r\n      new Error(\"linkPath 为 string 或 function\");\r\n    }\r\n  },\r\n  methods: {\r\n    applyOpacity(opacity = 1) {\r\n      if (this.transitionDuration) {\r\n        select(this.$refs[`link-${this.linkData.data.id}`])\r\n          .transition()\r\n          .duration(this.transitionDuration)\r\n          .style(\"opacity\", opacity);\r\n      } else {\r\n        select(this.$refs[`link-${this.linkData.data.id}`]).style(\r\n          \"opacity\",\r\n          opacity\r\n        );\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.applyOpacity();\r\n  },\r\n  beforeDestroy() {\r\n    this.applyOpacity(0);\r\n  }\r\n};\r\n</script>\r\n","import uuid from \"uuid\";\r\n\r\nconst assignProperties = data => {\r\n  return data.map(node => {\r\n    node.id = uuid.v4();\r\n    node._collapsed = false;\r\n    if (node.children && node.children.length > 0) {\r\n      node.children = assignProperties(node.children);\r\n      node._children = node.children;\r\n    }\r\n    return node;\r\n  });\r\n};\r\n\r\nexport { assignProperties };\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Node.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Node.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Node.vue?vue&type=template&id=0e68800a&\"\nimport script from \"./Node.vue?vue&type=script&lang=js&\"\nexport * from \"./Node.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{ref:_vm.nodeData.data.id,staticClass:\"v-tree__node-base\",style:(_vm.initStyle),attrs:{\"transform\":_vm.transform}},[_c('foreignObject',{attrs:{\"x\":-_vm.nodeSize.x / 2,\"y\":-_vm.nodeSize.y / 2,\"width\":_vm.nodeSize.x,\"height\":_vm.nodeSize.y}},[_c('ForeignObjectElement')],1),_vm._v(\" \"),(_vm.nodeData.data._children)?_c('g',{staticClass:\"v-tree__collapse-icon\",attrs:{\"transform\":_vm.collapseIcon},on:{\"click\":_vm.handleClick}},[_c('circle',{attrs:{\"r\":\"8\"}}),_vm._v(\" \"),(_vm.nodeData.data._collapsed)?_c('polyline',{attrs:{\"points\":\"-4,0 4,0 0,0 0,4 0,-4\",\"stroke-width\":\"2\",\"stroke\":\"white\",\"fill\":\"none\"}}):_c('line',{attrs:{\"x1\":\"-4\",\"y1\":\"0\",\"x2\":\"4\",\"y2\":\"0\",\"stroke-width\":\"2\",\"stroke\":\"white\"}})]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('path',{ref:(\"link-\" + (_vm.linkData.data.id)),staticClass:\"v-tree__link-base\",style:(_vm.initStyle),attrs:{\"d\":_vm.linkPath}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { oneOf, typeOf } from \"./assist\";\r\n\r\nexport const treeProps = {\r\n  initData: {\r\n    type: Array,\r\n    required: true\r\n  },\r\n  orientation: {\r\n    type: String,\r\n    default: \"horizontal\",\r\n    // default: 'vertical',\r\n    validator(value) {\r\n      return oneOf(value, [\"horizontal\", \"vertical\"]);\r\n    }\r\n  },\r\n  collapsible: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  deepFactor: {\r\n    type: Number,\r\n    default: 0.65\r\n  },\r\n  nodeSvgShape: {\r\n    type: String,\r\n    default: \"circle\"\r\n  },\r\n  nodeSvgShapeAttr: {\r\n    type: Object,\r\n    default() {\r\n      return {\r\n        r: 10\r\n      };\r\n    }\r\n  },\r\n  pathFunc: {\r\n    default: \"fish\"\r\n  },\r\n  nodeSize: {\r\n    type: Object,\r\n    default() {\r\n      return {\r\n        x: 140,\r\n        y: 100\r\n      };\r\n    }\r\n  },\r\n  separation: {\r\n    type: Object,\r\n    default() {\r\n      return {\r\n        siblings: 1.2,\r\n        nonSiblings: 1.2\r\n      };\r\n    }\r\n  },\r\n  zoomable: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  zoom: 1,\r\n  scaleExtent: {\r\n    type: Object,\r\n    default() {\r\n      return {\r\n        min: 0.1,\r\n        max: 1\r\n      };\r\n    }\r\n  },\r\n  translate: {\r\n    type: Object,\r\n    default() {\r\n      return {\r\n        x: 0,\r\n        y: 0\r\n      };\r\n    },\r\n    validator(value) {\r\n      return typeOf(value.x) === \"number\" && typeOf(value.y) === \"number\";\r\n    }\r\n  },\r\n  scale: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  transitionDuration: {\r\n    type: Number,\r\n    default: 500\r\n  },\r\n  allowForeignObjects: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  renderForeignObjects: {\r\n    type: Function,\r\n    default() {\r\n      return \"\";\r\n    }\r\n  }\r\n};\r\n","<template>\r\n  <div :class=\"['v-tree__container', { 'v-tree--grabbable': zoomable }]\">\r\n    <svg :ref=\"svgRef\"\r\n         width=\"100%\"\r\n         height=\"100%\">\r\n      <transition>\r\n        <g :ref=\"gRef\"\r\n           :transform=\"\r\n            `translate(${translate.x},${translate.y}) scale(${scale})`\r\n          \">\r\n          <Link v-for=\"(link, index) in tree.links\"\r\n                :key=\"index\"\r\n                :pathFunc=\"pathFunc\"\r\n                :orientation=\"orientation\"\r\n                :linkData=\"link\"\r\n                :nodeSize=\"nodeSize\"\r\n                :transitionDuration=\"transitionDuration\"\r\n                :deepFactor=\"deepFactor\" />\r\n\r\n          <Node v-for=\"node in tree.nodes\"\r\n                :key=\"node.data.id\"\r\n                :nodeData=\"node\"\r\n                :nodeSize=\"nodeSize\"\r\n                :transitionDuration=\"transitionDuration\"\r\n                :orientation=\"orientation\"\r\n                :nodeSvgShape=\"nodeSvgShape\"\r\n                :nodeSvgShapeAttr=\"nodeSvgShapeAttr\"\r\n                :allowForeignObjects=\"allowForeignObjects\"\r\n                :renderForeignObjects=\"renderForeignObjects\"\r\n                @handleNodeToggle=\"handleNodeToggle\" />\r\n        </g>\r\n      </transition>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { tree, hierarchy, select, event, zoom } from \"d3\";\r\nimport { uniqueId } from \"../../utils/assist\";\r\nimport { assignProperties } from \"../../utils/dataHelper\";\r\nimport * as props from \"../../utils/propsValidate\";\r\nimport Link from \"./Link.vue\";\r\nimport Node from \"./Node.vue\";\r\nexport default {\r\n  name: \"Tree\",\r\n  provide() {\r\n    return {\r\n      $$tree: this\r\n    };\r\n  },\r\n  components: {\r\n    Link,\r\n    Node\r\n  },\r\n  props: props.treeProps,\r\n  data() {\r\n    return {\r\n      svgRef: uniqueId(),\r\n      gRef: uniqueId(),\r\n      data: assignProperties(this.initData),\r\n      nodes: [],\r\n      links: []\r\n    };\r\n  },\r\n  computed: {\r\n    treemap() {\r\n      // tree layout\r\n      const { x, y } = this.nodeSize;\r\n      const treemap = tree()\r\n        // .size([this.viewPort.width, this.viewPort.height])\r\n        .nodeSize(this.orientation === \"horizontal\" ? [y, x] : [x, y])\r\n        .separation((a, b) =>\r\n          a.parent.data.id == b.parent.data.id\r\n            ? this.separation.siblings\r\n            : this.separation.nonSiblings\r\n        );\r\n      return treemap;\r\n    },\r\n    root() {\r\n      const root = hierarchy(this.data[0], d =>\r\n        d._collapsed ? null : d._children\r\n      );\r\n      return root;\r\n    },\r\n    tree() {\r\n      const treeData = this.treemap(this.root);\r\n      const nodes = treeData.descendants();\r\n      nodes.forEach(function(d) {\r\n        d.y = d.depth * 180;\r\n      });\r\n      const links = treeData.descendants().slice(1);\r\n      nodes.forEach(node => {\r\n        this.orientation === \"horizontal\"\r\n          ? (node.y = node.y * (1 / this.deepFactor))\r\n          : (node.y = node.y * this.deepFactor);\r\n      });\r\n      return { nodes, links };\r\n    }\r\n  },\r\n  watch: {\r\n    initData(val) {\r\n      this.data = assignProperties(val);\r\n    }\r\n  },\r\n  methods: {\r\n    bindZoomListener() {\r\n      const svg = select(this.$refs[this.svgRef]);\r\n      const g = select(this.$refs[this.gRef]);\r\n\r\n      if (this.zoomable) {\r\n        svg.call(\r\n          zoom()\r\n            .scaleExtent([this.scaleExtent.min, this.scaleExtent.max])\r\n            .on(\"zoom\", () => {\r\n              // TODO: 当scale !== 1 时，首次触发zoom会有bug\r\n              const [lastX, lastY] = [this.translate.x, this.translate.y];\r\n              const { x, y, k } = event.transform;\r\n              g.attr(\r\n                \"transform\",\r\n                `translate(${lastX + x},${lastY + y}) scale(${k})`\r\n              );\r\n            })\r\n        );\r\n      }\r\n    },\r\n    setInitialTreeDepth(nodeSet, initialDepth) {\r\n      nodeSet.forEach(n => {\r\n        n._collapsed = n.depth >= initialDepth;\r\n      });\r\n    },\r\n    handleNodeToggle(node) {\r\n      const data = [...this.data];\r\n      const targetNode = this.findNodeById(node.data.id, data)[0];\r\n      if (this.collapsible) {\r\n        targetNode._collapsed\r\n          ? this.expandNode(targetNode)\r\n          : this.collapseNode(targetNode);\r\n        this.data = data;\r\n      }\r\n      // if (this.props.collapsible && !this.state.isTransitioning) {\r\n\r\n      // this.setState({ data, isTransitioning: true }, () => this.handleOnClickCb(targetNode, evt));\r\n      // Await transitionDuration + 10 ms before unlocking node toggling again\r\n      // setTimeout(\r\n      //   () => this.setState({ isTransitioning: false }),\r\n      //   this.props.transitionDuration + 10,\r\n      // );\r\n      // this.internalState.targetNode = targetNode;\r\n      // }\r\n      // else {\r\n      //   this.handleOnClickCb(targetNode, evt);\r\n      // }\r\n    },\r\n    expandNode(node) {\r\n      node._collapsed = false;\r\n    },\r\n    collapseNode(node) {\r\n      node._collapsed = true;\r\n      if (node._children && node._children.length > 0) {\r\n        node._children.forEach(child => {\r\n          this.collapseNode(child);\r\n        });\r\n      }\r\n    },\r\n    findNodeById(nodeId, nodeSet, hits = []) {\r\n      if (hits.length > 0) {\r\n        return hits;\r\n      }\r\n      hits = hits.concat(nodeSet.filter(node => node.id === nodeId));\r\n\r\n      nodeSet.forEach(node => {\r\n        if (node._children && node._children.length > 0) {\r\n          hits = this.findNodeById(nodeId, node._children, hits);\r\n          return hits;\r\n        }\r\n        return hits;\r\n      });\r\n\r\n      return hits;\r\n    },\r\n    update() {}\r\n  },\r\n  mounted() {\r\n    this.bindZoomListener();\r\n    const { width, height } = this.$refs[this.svgRef].getBoundingClientRect();\r\n    this.viewPort = {\r\n      width,\r\n      height\r\n    };\r\n    // console.log(this.viewPort)\r\n  }\r\n};\r\n</script>\r\n","export default {\r\n  name: \"ForeignObjectElement\",\r\n  inject: [\"$$tree\"],\r\n  props: {\r\n    nodeData: Object,\r\n    renderForeignObjects: Function\r\n  },\r\n  /**\r\n   * @see {@link https://cn.vuejs.org/v2/guide/render-function.html#%E6%8F%92%E6%A7%BD}\r\n   */\r\n  created() {\r\n    if (this.$$tree.$scopedSlots) {\r\n      const $node = this.$options.parent;\r\n      const nodeData = $node.$options.propsData.nodeData;\r\n      this.$options.render = h =>\r\n        h(\"div\", [this.$$tree.$scopedSlots.default(nodeData)]);\r\n    }\r\n  }\r\n};\r\n","<template>\r\n  <g\r\n    :ref=\"nodeData.data.id\"\r\n    :transform=\"transform\"\r\n    :style=\"initStyle\"\r\n    class=\"v-tree__node-base\"\r\n  >\r\n    <foreignObject\r\n      :x=\"-nodeSize.x / 2\"\r\n      :y=\"-nodeSize.y / 2\"\r\n      :width=\"nodeSize.x\"\r\n      :height=\"nodeSize.y\"\r\n    >\r\n      <ForeignObjectElement />\r\n    </foreignObject>\r\n    <g\r\n      :transform=\"collapseIcon\"\r\n      v-if=\"nodeData.data._children\"\r\n      @click=\"handleClick\"\r\n      class=\"v-tree__collapse-icon\"\r\n    >\r\n      <circle r=\"8\"></circle>\r\n      <polyline\r\n        points=\"-4,0 4,0 0,0 0,4 0,-4\"\r\n        stroke-width=\"2\"\r\n        stroke=\"white\"\r\n        fill=\"none\"\r\n        v-if=\"nodeData.data._collapsed\"\r\n      />\r\n      <line\r\n        x1=\"-4\"\r\n        y1=\"0\"\r\n        x2=\"4\"\r\n        y2=\"0\"\r\n        stroke-width=\"2\"\r\n        stroke=\"white\"\r\n        v-else\r\n      />\r\n    </g>\r\n  </g>\r\n</template>\r\n\r\n<script>\r\nimport { select, drag, event } from \"d3\";\r\nimport ForeignObjectElement from \"./ForeignObjectElement\";\r\nexport default {\r\n  name: \"Node\",\r\n  components: {\r\n    ForeignObjectElement\r\n  },\r\n  props: [\r\n    \"nodeData\",\r\n    \"nodeSize\",\r\n    \"nodeSvgShape\",\r\n    \"nodeSvgShapeAttr\",\r\n    \"transitionDuration\",\r\n    \"orientation\",\r\n    \"allowForeignObjects\",\r\n    \"renderForeignObjects\"\r\n  ],\r\n  watch: {\r\n    nodeData: {\r\n      handler() {\r\n        this.setTransform(this.nodeData);\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      transform: \"\",\r\n      initStyle: {\r\n        opacity: 0\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    collapseIcon() {\r\n      return this.orientation === \"horizontal\"\r\n        ? `translate(${this.nodeSize.x / 2},0)`\r\n        : `translate(0,${this.nodeSize.y / 2})`;\r\n    }\r\n  },\r\n  methods: {\r\n    // renderNodeElement() {\r\n    //   const nodeEl = select(this.$refs[this.nodeData.data.id]).append(\r\n    //     this.nodeSvgShape\r\n    //   );\r\n\r\n    //   Object.entries(this.nodeSvgShapeAttr).forEach(item => {\r\n    //     nodeEl.attr(item[0], item[1]);\r\n    //   });\r\n    // },\r\n    setTransform(data) {\r\n      const { x, y } = data;\r\n      const transform =\r\n        this.orientation === \"horizontal\"\r\n          ? `translate(${y},${x})`\r\n          : `translate(${x},${y})`;\r\n      this.applyTransform(transform);\r\n    },\r\n    applyTransform(transform, opacity = 1, done = () => {}) {\r\n      const node = select(this.$refs[this.nodeData.data.id]);\r\n      if (this.transitionDuration) {\r\n        node\r\n          // .attr('transform',parentTransform)\r\n          .transition()\r\n          .duration(this.transitionDuration)\r\n          .attr(\"transform\", transform)\r\n          .attr(\"style\", `opacity: ${opacity}`);\r\n        done();\r\n      } else {\r\n        node.attr(\"transform\", transform).attr(\"style\", `opacity: ${opacity}`);\r\n        done();\r\n      }\r\n\r\n      node\r\n        .call(\r\n          drag().on(\"start\", function(d) {\r\n            // console.log(d)\r\n            // if (d == root) {\r\n            //     return;\r\n            // }\r\n            // dragStarted = true;\r\n            // nodes = tree.nodes(d);\r\n            // d3.event.sourceEvent.stopPropagation();\r\n            // it's important that we suppress the mouseover event on the node being dragged. Otherwise it will absorb the mouseover event and the underlying node will not detect it d3.select(this).attr('pointer-events', 'none');\r\n          })\r\n        )\r\n        .on(\"click\", d => {\r\n          if (event.defaultPrevented) return;\r\n        });\r\n    },\r\n    handleClick(e) {\r\n      this.$emit(\"handleNodeToggle\", this.nodeData, e);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setTransform(this.nodeData);\r\n  },\r\n  beforeDestroy() {\r\n    const data = this.nodeData.parent ? this.nodeData.parent : { x: 0, y: 0 };\r\n    const transform = this.setTransform(data);\r\n    this.applyTransform(transform);\r\n  }\r\n};\r\n</script>\r\n","import { render, staticRenderFns } from \"./Tree.vue?vue&type=template&id=37e73bac&\"\nimport script from \"./Tree.vue?vue&type=script&lang=js&\"\nexport * from \"./Tree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./Link.vue?vue&type=template&id=6330152c&\"\nimport script from \"./Link.vue?vue&type=script&lang=js&\"\nexport * from \"./Link.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./view.vue?vue&type=template&id=a3d946ea&\"\nimport script from \"./view.vue?vue&type=script&lang=js&\"\nexport * from \"./view.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['v-tree__container', { 'v-tree--grabbable': _vm.zoomable }]},[_c('svg',{ref:_vm.svgRef,attrs:{\"width\":\"100%\",\"height\":\"100%\"}},[_c('transition',[_c('g',{ref:_vm.gRef,attrs:{\"transform\":(\"translate(\" + (_vm.translate.x) + \",\" + (_vm.translate.y) + \") scale(\" + _vm.scale + \")\")}},[_vm._l((_vm.tree.links),function(link,index){return _c('Link',{key:index,attrs:{\"pathFunc\":_vm.pathFunc,\"orientation\":_vm.orientation,\"linkData\":link,\"nodeSize\":_vm.nodeSize,\"transitionDuration\":_vm.transitionDuration,\"deepFactor\":_vm.deepFactor}})}),_vm._v(\" \"),_vm._l((_vm.tree.nodes),function(node){return _c('Node',{key:node.data.id,attrs:{\"nodeData\":node,\"nodeSize\":_vm.nodeSize,\"transitionDuration\":_vm.transitionDuration,\"orientation\":_vm.orientation,\"nodeSvgShape\":_vm.nodeSvgShape,\"nodeSvgShapeAttr\":_vm.nodeSvgShapeAttr,\"allowForeignObjects\":_vm.allowForeignObjects,\"renderForeignObjects\":_vm.renderForeignObjects},on:{\"handleNodeToggle\":_vm.handleNodeToggle}})})],2)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-progress\"},[_c('Tree',{ref:\"treeContainer\",attrs:{\"orientation\":\"vertical\",\"initData\":_vm.data,\"translate\":_vm.translate,\"separation\":_vm.separation,\"pathFunc\":\"straight\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"base-node member\"},[_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"elderOrder\"},[_vm._v(\"\\n            次子\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"lineage\"},[_vm._v(\"二十三世\")])]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"uname\"},[_c('div',{staticClass:\"username\"},[_vm._v(\"张三丰\")]),_vm._v(\" \"),_c('div',{staticClass:\"epithet\"},[_vm._v(\"张无忌\")])]),_vm._v(\" \"),_c('div',{staticClass:\"wifeLastname\"},[_vm._v(\"韩氏\")])])])]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}